<%- target = @target || @item -%>
<div class="repo-links">
	<%- if file_commit = git_file_commit_hash(target[:filename]) -%>
		<%- dirname = File.dirname(target[:filename]) -%>
		<%- dir_commit = git_file_commit_hash(File.dirname(dirname)) -%>
		<details>
			<summary>変更履歴</summary>
			<ul>
				<li>
					master (latest version)
					<ul>
						<li>
							<%= link_to "<i class='fa fa-file-o' aria-hidden='true'><!-- --></i> Latest version of the article (master)", git_file_url(target[:filename], 'master') %>
						</li>
						<li>
							<%= link_to "<i class='fa fa-history' aria-hidden='true'><!-- --></i> History of the article (master)", git_history_url(dirname, 'master') %>
						</li>
					</ul>
				</li>
				<li>
					This version (permalink)
					<ul>
						<li>
							<%= link_to "<i class='fa fa-file-o' aria-hidden='true'><!-- --></i> This version of the article (#{file_commit})", git_file_url(target[:filename], file_commit) %>
						</li>
						<li>
							<%= link_to "<i class='fa fa-git' aria-hidden='true'><!-- --></i> This version of the repository (#{dir_commit})", git_tree_url('', dir_commit) %>
						</li>
						<li>
							<%= link_to "<i class='fa fa-history' aria-hidden='true'><!-- --></i> History of this version of the article (#{dir_commit})", git_history_url(dirname, dir_commit) %>
						</li>
					</ul>
				</li>
			</ul>
		</details>
	<%- end -%>
</div>
<%-# vim: set ft=eruby : -%>
