---
created_at: 2017-08-09T16:18:06+0900
title: "Weekly report 2017-W32"
htags:
  - "日常/日記"
kind: article

excerpt: "2017年 第32週 まとめ"
---
<?xml version="1.0"?>
<eh:article
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:eh="https://www.cardina1.red/_ns/xml/easy-html/2017-0809"
	id="2017-08-12-weekly-2017-w32"
>
<eh:title>Weekly report 2017-W32</eh:title>
<p>
	2017-W31-6 (Sat) から 2017-W32-5 (Fri) までの日記。
</p>


<eh:section id="news">
	<eh:title>ニュース・知ったこと</eh:title>

	<eh:section id="firefox-55">
		<eh:title>Firefox 55 リリース</eh:title>
		<ul>
			<li>
				<a href="https://www.mozilla.org/ja/firefox/">より優れた、高速でプライベートな最新ブラウザー | Firefox</a>
			</li>
			<li>
				<a href="https://www.mozilla.org/en-US/firefox/55.0/releasenotes/">Firefox — Notes (55.0) — Mozilla</a>
			</li>
		</ul>
		<p>
			Content process の数を設定画面で変更できるようになったりとか、パフォーマンスの劇的な改善とか。
			WebVR サポートとかは個人的には当面使いそうにないのであまり興味ない。
		</p>
		<p>
			<eh:emoji fontawesome="firefox" /> Firefox はいいぞ
		</p>
	</eh:section>

	<eh:section id="gnusocial-nightly-update">
		<eh:title>GNU Social nightly update</eh:title>
		<ul>
			<li>
				<a href="https://git.gnu.io/gnu/gnu-social/compare/586aaa596e2277a2c4bea9cae476014a2837a41d...090f4a9474c641d4c78170eb952976f22f798c06">586aaa596e2277a2c4bea9cae476014a2837a41d...090f4a9474c641d4c78170eb952976f22f798c06 · gnu.io / gnu-social · GitLab</a>
			</li>
		</ul>
		<p>
			INSTALL ファイルの更新や細々した修正。
		</p>
		<p>
			どうも更新された INSTALL ファイルによると、 GNU Social の nightly は既に PHP 7 に対応していたらしい。
		</p>
	</eh:section>

	<eh:section id="cloud-dl-script">
		<eh:title>cloud-dl</eh:title>
		<ul>
			<li>
				<a href="https://github.com/cghdev/cloud-dl">
					<eh:emoji fontawesome="github" />
					cghdev/cloud-dl: Bash script to list/upload/download files from owncloud/nextcloud
				</a>
			</li>
			<li>
				<a href="http://blog.maud.io/entry/2017/08/05/nextcloud">Nextcloud鯖を立てた - ﾏﾂﾀﾞｲｱﾘｰ</a>
			</li>
		</ul>
		<p>
			<a href="http://blog.maud.io/entry/2017/08/05/nextcloud">Nextcloud鯖を立てた - ﾏﾂﾀﾞｲｱﾘｰ</a>で紹介されていた。
			めっちゃ便利。
			これでサーバのバックアップを、ラップトップを経由せずｵｰﾝｸﾗｳﾄﾞ個人鯖に直接送れるようになった。
		</p>
	</eh:section>

	<eh:section id="unmaintained-tech">
		<eh:title>"No maintenance Intended" バッヂ</eh:title>
		<ul>
			<li>
				<a href="http://unmaintained.tech/">No Maintenance Intended</a>
			</li>
			<li>
				<a href="https://github.com/potch/unmaintained.tech">
					<eh:emoji fontawesome="github" />
					potch/unmaintained.tech: No Maintenance Intended
				</a>
			</li>
			<li>
				<!-- Don't use `http://unmaintained.tech/badge.svg` directly because the site doesn't support HTTPS! -->
				<img src="./no-maintenance-intended-badge.svg" alt="No Maintenance Intended バッヂ" />
			</li>
		</ul>
		<p>
			"No maintenance intended" バッヂを GitHub の README とかに貼れるよ、みたいなサイト。
		</p>
		<p>
			ブラウザでブックマークするとサイト自体がメンテされてないように見えてややこしいし、サイト末尾に <q lang="en">This project <i>is</i> maintained and is on GitHub!</q> とか書いてあって笑う。
		</p>
	</eh:section>
</eh:section>

<eh:section id="private-activities">
	<eh:title>私的活動</eh:title>

	<eh:section id="use-debian-stretch-for-gnusocial">
		<eh:title>GNU Social のコンテナを Debian jessie から Debian stretch へアップデートした</eh:title>
		<p>
			<a href="#gnusocial-nightly-update">INSTALL ファイルの更新</a>で気付いたが、 nightly が既に PHP 7 に対応しているようだったので、これを機に Debian も新しいものを使うことにした。
		</p>
		<p>
			変更は以下のとおり。
		</p>
		<ul>
			<li>
				パッケージ名の変更
				<ul>
					<li>
						jessie では <code>php5-foo</code> のようになっていたが、 stretch では <code>php7.0-foo</code> のようになっている。
					</li>
					<li>
						私は現時点では以下のようにパッケージを指定している。
						<figure>
							<pre><code><![CDATA[
RUN apt-get update -q && apt-get install -y \
    php7.0-bcmath php7.0-curl php7.0-exif php7.0-gd php7.0-intl \
    php7.0-mbstring php7.0-mysql php7.0-opcache php7.0-readline php7.0-xmlwriter \
    php7.0-fpm nginx-full rsync php7.0-gmp php7.0-json \
    git-core make gettext \
    curl php7.0-cli \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*
]]></code></pre>
							<figcaption><code class="filepath">Dockerfile</code> 抜粋</figcaption>
						</figure>
					</li>
					<li>
						これに伴って、 php-fpm のサービス名も <code>php5-fpm</code> から <code>php7.0-fpm</code> になっている。
					</li>
				</ul>
			</li>
			<li>
				php の関連ファイルパスの変更
				<ul>
					<li>
						設定ファイルは、 <code class="dirpath">/etc/php5</code> 以下にあったディレクトリ群が <code class="dirpath">/etc/php/7.0</code> 以下に移動している。
					</li>
					<li>
						php-fpm のソケットのパスは、デフォルトで <code class="filepath">/var/run/php5-fpm.sock</code> だったが、 <code class="filepath">/run/php/php7.0-fpm.sock</code> に変更されている。
					</li>
				</ul>
			</li>
		</ul>
		<p>
			致命的な変更などはないので、頭を空っぽにして追従すればよい。
		</p>
		<p>
			私の環境の場合、変更すべき記述が Dockerfile 、 GNU Social 用の nginx 設定ファイル、コンテナのスタートスクリプトなどに散っていたので、変更洩れでしばらく 502 エラーを出してしまった。
		</p>
	</eh:section>
</eh:section>

</eh:article>
